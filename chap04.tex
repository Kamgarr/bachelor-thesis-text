\chapter{User guide}
\addtocontents{toc}{\protect\setcounter{tocdepth}{0}}
This part of the documentation is focused on the end user, in this case, player. We introduce controls of the application and detail the possibility to adjust the game world.

\section{Installation guide}
\addtocontents{toc}{\protect\setcounter{tocdepth}{0}}

This section documents the process of compiling and running the application. We will focus on the installation process on \emph{Ubuntu 17.04}, but the code is written in as platform independent and should work on any platform where the library dependencies work.

The packages with library dependencies are available for multiple \emph{Linux}
distributions and can be manually compiled and installed on most other
operating systems.

\paragraph{Dependencies}
Following packages are required to compile the application. We also provide versions of packages used to create and test our implementation.
\begin{center}
\begin{tabular}{ll}
package & version \\
\hline
libbullet-dev & 2.83.7+dfsg-5 \\
libirrlicht-dev & 1.8.4+dfsg1-1 \\
libcgal-dev & 4.9-1build2 \\
voro++-dev & 0.4.6+dfsg1-2 \\
HACD & bundled with the application\footnote{hacd downloaded from https://sourceforge.net/projects/hacd}
\end{tabular}
\end{center}

A C++ compiler capable of compiling the C++14 standard is also needed, we have used GCC version 6.3.0-2ubuntu1 with flags -std=c++14 -g -o2 -Wall -pedantic -frounding-math.

\subsection*{Compiling the application}
We assume that all the right versions of the packages from the previous section are correctly installed. This installation process is automated with the use of \emph{make}. The HADC library is included with our code with its own {\tt Makefile}.

The bundled HACD library needs to be compiled first, then the main application is compiled. The compiling process may take a few minutes.
\begin{code}
~$ tar -xzf DestructionInGame.zip
~$ cd DestructionInGame
~/DestructionInGame$ make -C lib/hacd/
~/DestructionInGame$ make
\end{code}

\section{Directory structure}
Our application is distributed among multiple folder and files. Here we describe the directory structure and mention the files in them.
\begin{description}
\item[src/] is a folder with our source code, both header files and cpp files can be found here.
\item[media/] directory contains 3D models, textures and \emph{world.cfg}  file (see ~\cref{sec:data}).
\item[include/] folder contains third party header files that are needed for compilation. Only headers associated with HACD are currently in the folder.
\item[lib/] contains the source codes of HACD library in sub-folder hacd/. It is also a target for compiling HACD.
\item[build/] is a target directory for make. After compilation object files and executable file \emph{game} are located here. 
\end{description}

\section{Hardware requirements}
Here is a short overview of the hardware we used.
\begin{itemize}
\item Intel Core i3 CPU 550 @ 3.20GHz $\times$ 4 
\item 8GB DDR3 1600MHz RAM
\item ATI Radeon HD 5770 GPU, 1200MHz, 1GB GDDR5
\end{itemize}
We recommend running the application on equal or better hardware then is the one we used to develop it. We require a CPU with at least 4 threads and 4GB of RAM.

\section{Using the application}
The application is run by executing the \emph{build/game} file. One optional console parameter is provided. It is {\tt -d}, and it enables debugging information to be rendered. In other words, it draws the collision shapes and bounding boxes around the objects.
\subsection*{Keyboard input}
Keys can be pressed simultaneously and also held down instead of multiple presses. The bindings are:
\begin{itemize}
\item W/S: pitch down/up
\item A/D: roll counter-clockwise/clockwise 
\item Q/E: yaw left/right
\item Z/X: speed up/slow down
\item Space Bar: shoot or unpause
\item P: pause the game
\item ESC: quit the game
\end{itemize}


\section{Input data}
\label{sec:data}
To allow the user to easily change the game world without the need of recompilation the input text file describing the whole setting is provided. The mentioned file is located in {\tt media/world.cfg}. 

\subsection*{{\tt world.cfg} format}
We will show that the structure of the data is straightforward and therefore we have chosen not to use XML or any other standardised format. The file is interpreted by lines. Each line represents one in-game entity. First three lines have special meaning, and the rest are destructible objects. Inside the line, we use semicolons as a separator between data items.

The \emph{first line} describes the sky-box, it is formed of 6 images in given order: top, bottom, left, right, front, back; relative to the starting viewpoint. 

All other lines use same nine data items. Those are object model, texture, position (3 coordinates), scale (3 numbers, one for every axis) and mass. Every number is used as a floating point number.
The second line describes the ground. Currently, the ground is generated as a solid cube with 1x1x1 size. Therefore model file is not needed. The third line is a description of our controlled vehicle. Beginning with this line, the texture file is an optional parameter and can be left blank. Bellow, we can see an example file.

\begin{centering}
\begin{Verbatim}[frame=single,numbers=left,xleftmargin=5mm]
top.jpg;bottom.jpg;left.jpg;right.jpg;front.jpg;back.jpg
;grid.jpg;0;-15;0;1000;10;1000;0
fighter.3ds;;0;20;0;0.5;0.5;0.5;1
building.obj;;-20;-11;-30;2;2;2;500
pyramid.obj;;50;-11;-100;5;10;5;800
...
\end{Verbatim}
\end{centering}
The zero mass means that the object is static and does not move.

\subsection*{Object models and textures}
The input formats are limited to the support of \emph{Irrlicht}. The detailed list of supported object and texture formats can be found on \emph{Irrlicht} web page~\footnote{http://irrlicht.sourceforge.net/?page\_id=45\#supportedformats}
\todo {something about manifolds and compatibility with nef\_polyhedron}


